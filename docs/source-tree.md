# HFT Arbitrage Bot - Source Tree

> **Auto-generated by document-project workflow**

---

## Project Structure

```
bot4/
├── Cargo.toml              # Rust dependencies and project config
├── README.md               # Project overview
├── data/
│   └── config.yaml         # Runtime configuration
├── docs/                   # Generated documentation
│   ├── index.md            # Master index
│   ├── architecture.md     # System architecture
│   ├── data-models.md      # Data type reference
│   ├── api-contracts.md    # API documentation
│   └── source-tree.md      # This file
└── src/                    # Source code
    ├── main.rs             # Entry point
    ├── lib.rs              # Library root
    ├── error.rs            # Error types
    ├── adapters/           # Exchange adapters
    ├── core/               # Business logic
    └── config/             # Configuration
```

---

## Source Files by Module

### `/src` (Root)

| File | Lines | Purpose |
|------|-------|---------|
| [main.rs](file:///c:/Users/jules/Documents/bot4/src/main.rs) | 67 | Entry point, scaffold with TODOs |
| [lib.rs](file:///c:/Users/jules/Documents/bot4/src/lib.rs) | 14 | Module exports |
| [error.rs](file:///c:/Users/jules/Documents/bot4/src/error.rs) | 35 | `AppError` enum |

### `/src/adapters` (Exchange Adapters)

| File | Lines | Purpose |
|------|-------|---------|
| [mod.rs](file:///c:/Users/jules/Documents/bot4/src/adapters/mod.rs) | 23 | Module re-exports |
| [traits.rs](file:///c:/Users/jules/Documents/bot4/src/adapters/traits.rs) | 327 | `ExchangeAdapter` trait, `MockAdapter` |
| [types.rs](file:///c:/Users/jules/Documents/bot4/src/adapters/types.rs) | 613 | `Orderbook`, `OrderRequest`, `ConnectionHealth` |
| [errors.rs](file:///c:/Users/jules/Documents/bot4/src/adapters/errors.rs) | 100 | `ExchangeError` variants |
| [vest.rs](file:///c:/Users/jules/Documents/bot4/src/adapters/vest.rs) | 2140 | Vest adapter (EIP-712) |
| [paradex.rs](file:///c:/Users/jules/Documents/bot4/src/adapters/paradex.rs) | 2868 | Paradex adapter (Starknet) |

### `/src/core` (Business Logic)

| File | Lines | Purpose |
|------|-------|---------|
| [mod.rs](file:///c:/Users/jules/Documents/bot4/src/core/mod.rs) | 12 | Module re-exports |
| [spread.rs](file:///c:/Users/jules/Documents/bot4/src/core/spread.rs) | 737 | `SpreadCalculator`, entry/exit spreads |
| [vwap.rs](file:///c:/Users/jules/Documents/bot4/src/core/vwap.rs) | 480 | VWAP calculation with slippage |
| [state.rs](file:///c:/Users/jules/Documents/bot4/src/core/state.rs) | 152 | `SharedAppState`, `BotState`, `Metrics` |
| [channels.rs](file:///c:/Users/jules/Documents/bot4/src/core/channels.rs) | 83 | `ChannelBundle` for inter-task comm |
| [logging.rs](file:///c:/Users/jules/Documents/bot4/src/core/logging.rs) | 398 | Structured logging, `SanitizedValue` |

### `/src/config` (Configuration)

| File | Lines | Purpose |
|------|-------|---------|
| [mod.rs](file:///c:/Users/jules/Documents/bot4/src/config/mod.rs) | 24 | Module re-exports |
| [types.rs](file:///c:/Users/jules/Documents/bot4/src/config/types.rs) | 372 | `AppConfig`, `BotConfig`, `RiskConfig` |
| [loader.rs](file:///c:/Users/jules/Documents/bot4/src/config/loader.rs) | 214 | YAML loading & validation |
| [constants.rs](file:///c:/Users/jules/Documents/bot4/src/config/constants.rs) | 213 | Environment-configurable defaults |
| [supabase.rs](file:///c:/Users/jules/Documents/bot4/src/config/supabase.rs) | ~50 | Supabase config loading |

---

## Statistics

| Category | Count |
|----------|-------|
| **Total Files** | 20 |
| **Total Lines** | ~8,900 |
| **Modules** | 4 (adapters, core, config, root) |
| **Exchange Adapters** | 2 (Vest, Paradex) |
| **Test Coverage** | Extensive unit tests in each module |

---

## Key Dependencies

```toml
# Async Runtime
tokio = { features = ["full"] }

# HTTP/WebSocket
reqwest = { features = ["json"] }
tokio-tungstenite = { features = ["native-tls"] }

# Crypto
ethers = { features = ["legacy"] }        # EIP-712 for Vest
starknet-crypto                            # SNIP-12 for Paradex

# Serialization
serde = { features = ["derive"] }
serde_json
serde_yaml

# Error Handling
thiserror
anyhow

# Logging
tracing
tracing-subscriber = { features = ["json", "env-filter"] }
```
